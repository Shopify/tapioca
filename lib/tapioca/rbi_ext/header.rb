# typed: strict
# frozen_string_literal: true

require "rbi"

module RBI
  module Header
    extend T::Sig

    sig do
      params(
        command: String,
        reason: T.nilable(String),
        strictness: T.nilable(String),
        show_file_header: T::Boolean
      ).returns(String)
    end
    def rbi_header(command, reason: nil, strictness: nil, show_file_header: true)
      statement = <<~HEAD
        # DO NOT EDIT MANUALLY
        # This is an autogenerated file for #{reason}.
        # Please instead update this file by running `#{command}`.
      HEAD

      sigil = <<~SIGIL if strictness
        # typed: #{strictness}
      SIGIL

      if show_file_header
        [statement, sigil].compact.join("\n").strip.concat("\n\n")
      elsif sigil
        sigil.strip.concat("\n\n")
      else
        ""
      end
    end
  end
end
